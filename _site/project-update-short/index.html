<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Work in Progress</title>
    <meta name="description" content="A%20Demonstration%20of%20my%20Project%20thus%20far">

    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Merriweather:300,300italic,400,400italic,700italic,700">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lato:300,400,700">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Source+Code+Pro:300,400,700">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="/assets/css/vendors/slidebars.min.css">
    <link rel="stylesheet" href="/assets/css/vendors/rrssb.css">
    <link rel="stylesheet" href="/assets/css/main.css">

    <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">

    <link rel="apple-touch-icon-precomposed" href="/assets/images/apple-touch-icon.png" />
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/assets/images/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/images/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/images/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/assets/images/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/images/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/assets/images/apple-touch-icon-152x152.png" />

    <link rel="canonical" href="http://kadie16.github.io/project-update-short/">
    <link rel="alternate" type="application/rss+xml" title="Kadie Jaffe" href="http://kadie16.github.io/feed.xml" />
</head>


<body>

    <div class="loader">
    <svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve">
        <filter id="dropshadow" height="130%">
            <feGaussianBlur in="SourceAlpha" stdDeviation="10"/>
            <feOffset dx="0" dy="0" result="offsetblur"/>
            <feMerge>
                <feMergeNode/>
                <feMergeNode in="SourceGraphic"/>
            </feMerge>
        </filter>
        <path d="M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z">
            <animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.5s" repeatCount="indefinite"/>
        </path><!-- style="filter:url(#dropshadow)" -->
    </svg>
</div>


    <main id="sb-site">

        <div class="container">
            <div class="wrapper">
                <div class="post">
    
    <p class="post-reading-time">&#126;
        
        
          12 min
        
    </p>
    

    <header class="post-header">
        
        <img src="https://github.com/kadie16/kadie16.github.io/raw/master/assets/images/posts/progress/angel8.png" alt="Work in Progress" class="post-thumb" />
        

        <h1 class="post-title">Work in Progress</h1>
    </header>

    <article class="post-content">
        <center><iframe width="604.8" height="453.6" src="https://www.youtube.com/embed/cjPib3gQU-k" frameborder="0" allowfullscreen=""></iframe></center>
<p><em><center>A Demonstration of my Project thus far</center></em></p>

<p>My project is a C++ program that reads in data describing 3D models, in .obj file format, and renders and lights the models with OpenGL. Since my last post, I have implemented some user interactions and use of the CGAL data structure. The models I use to test my program came from the <a href="http://graphics.berkeley.edu">UC Berkeley Computer Graphics</a> website :)</p>

<h2 id="latest-changes">Latest Changes</h2>
<ul>
  <li>Automatically find and fit model.</li>
  <li>Maintain aspect ratio on window resize.</li>
  <li>Select Color.</li>
  <li>Shading based on vertex normal vectors.</li>
  <li>Rotation by mouse drag.</li>
  <li>Zoom by right click mouse drag.</li>
  <li>Option to move model by mouse drag.</li>
</ul>

<h3 id="find-and-fit">Find and Fit</h3>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">cam</span><span class="p">.</span><span class="n">findModel</span><span class="p">(</span><span class="n">objModel</span><span class="p">);</span>
<span class="n">cam</span><span class="p">.</span><span class="n">viewModel</span><span class="p">();</span>
<span class="n">cam</span><span class="p">.</span><span class="n">moveToCenter</span><span class="p">();</span>
<span class="n">zoomF</span> <span class="o">=</span> <span class="n">cam</span><span class="p">.</span><span class="n">fitModel</span><span class="p">(</span><span class="n">maxCoords</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">minCoords</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                     <span class="n">maxCoords</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">minCoords</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
                     <span class="n">maxCoords</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">minCoords</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">2</span><span class="p">));</span></code></pre></div>

<p>Now, whenever a new .obj file is selected, the “camera” automatically centers the model and makes it fit on the screen. I say “camera” because there is no actual camera in OpenGL. Instead, you manipulate the view by applying matrix transformations to the modelview and projection matrices. More on that later. I wrote a “camera” class, which handles these transformations.</p>

<h3 id="aspect-ratio">Aspect Ratio</h3>
<p>I think this is probably the least noticeable new feature, but it was one of the bigger challenges. If you watch closely, you can see that when I resize the window in the video, the cube retains its shape. In otherwords, it doesn’t turn into a rectangle if the viewer isn’t perfectly square. You might also notice that the angel is more slender than before.</p>

<p><img src="https://raw.githubusercontent.com/kadie16/kadie16.github.io/master/assets/images/posts/progress/angel7.png" alt="Angel Aspect Before" /> <em><center>Squished angel</center></em>
<img src="https://raw.githubusercontent.com/kadie16/kadie16.github.io/master/assets/images/posts/progress/angel8.png" alt="Angel Aspect After" /> <em><center>Angel with corrected aspect ratio</center></em></p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="kt">void</span> <span class="n">camera</span><span class="o">::</span><span class="n">adjustAspect</span><span class="p">(</span><span class="kt">float</span> <span class="n">window</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="kt">float</span> <span class="n">window</span><span class="p">.</span><span class="n">height</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* Modify the Projection Matrix */</span>
    <span class="n">glMatrixMode</span><span class="p">(</span><span class="n">GL_PROJECTION</span><span class="p">);</span>
    <span class="cm">/* Start from a &#39;clean slate&#39; */</span> 
    <span class="n">glLoadIdentity</span><span class="p">();</span>
    <span class="cm">/* Calculate Aspect Ratio */</span>
    <span class="kt">float</span> <span class="n">newAspect</span> <span class="o">=</span> <span class="n">window</span><span class="p">.</span><span class="n">width</span><span class="o">/</span><span class="n">window</span><span class="p">.</span><span class="n">height</span><span class="p">;</span>
    <span class="cm">/* Adjust Accordingly */</span>
    <span class="n">leftAdjust</span> <span class="o">=</span> <span class="n">newAspect</span> <span class="o">*</span> <span class="n">left</span><span class="p">;</span>
    <span class="n">rightAdjust</span> <span class="o">=</span> <span class="n">newAspect</span> <span class="o">*</span> <span class="n">right</span><span class="p">;</span>
    <span class="n">glOrtho</span><span class="p">(</span><span class="n">zoomF</span> <span class="o">*</span> <span class="n">leftAdjust</span><span class="p">,</span> <span class="n">zoomF</span> <span class="o">*</span> <span class="n">rightAdjust</span><span class="p">,</span> <span class="n">zoomF</span> <span class="o">*</span> <span class="n">bottom</span><span class="p">,</span> <span class="n">zoomF</span> <span class="o">*</span> <span class="n">top</span><span class="p">,</span> <span class="n">near</span><span class="p">,</span> <span class="n">far</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<h3 id="color-picking">Color Picking</h3>

<p><img src="https://raw.githubusercontent.com/kadie16/kadie16.github.io/master/assets/images/posts/progress/humanoid1.png" alt="humanoid color pick" /></p>

<p>To me this feature seems more impressive than the constant aspect ratio, but it took about five minutes to implement. Thanks to QT, color picking boiled down to two lines of code.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="kt">void</span> <span class="n">MainWindow</span><span class="o">::</span><span class="n">on_toolButton_clicked</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">QColor</span> <span class="n">color</span> <span class="o">=</span> <span class="n">QColorDialog</span><span class="o">::</span><span class="n">getColor</span><span class="p">();</span>
    <span class="n">ui</span><span class="o">-&gt;</span><span class="n">widget</span><span class="o">-&gt;</span><span class="n">grabColor</span><span class="p">(</span><span class="n">color</span><span class="p">.</span><span class="n">red</span><span class="p">(),</span> <span class="n">color</span><span class="p">.</span><span class="n">green</span><span class="p">(),</span> <span class="n">color</span><span class="p">.</span><span class="n">blue</span><span class="p">());</span>
<span class="p">}</span></code></pre></div>
<p><em><center>ui is the User Interface, widget is the part of the ui that displays the model</center></em></p>

<p>Ok, I had to write grabColor too, so maybe 5 lines. Still. I actually threw this feature in because I needed a break from some other issue I was stuck on.</p>

<h3 id="vertex-shading">Vertex Shading</h3>

<p>In my last post, I mentioned that every vertex needs a normal vector so openGL knows how to shade the model. At that time, I was just computing the normal for each face and lighting all of the vertices in that face uniformly.</p>

<p><img src="https://raw.githubusercontent.com/kadie16/kadie16.github.io/master/assets/images/posts/progress/shading1.png" alt="Before and after cube picture" /> <em><center>Before and After per-vertex shading</center></em></p>

<p>Now, the normal for each vertex is assigned to be the <em>average</em> of the normals of all of the faces it belongs to. So the vertices on the corners of the cube are assigned a normal equal to the average of the normal vectors of the three faces that meet at that corner. The vertices on the edge of two faces get the average of the two normal vectors of those faces. The vertices in the middle of the face just get the normal that belongs to that face. OpenGL then interpolates in between the vertices to produce the smooth gradient you see.</p>

<h3 id="user-controls">User Controls</h3>

<h4 id="making-it-feel-natural">Making it “feel” natural</h4>
<p>I expected understanding the openGL calls to be challenging, but I didn’t anticipate the challenge of making the controls intuitive. I guess this speaks to the idea that the best computer graphics go unnoticed.</p>

<p>The user controls are simulated by a series of repaints. Actually the model is being redrawn constantly, but without adjustments to the modelview or projection matrix, it is just drawn exactly the same. So my goal is to animate, or redraw, the model so the user feels like they are actually touching and manipulating the model with their mouse.</p>

<h4 id="rotation">Rotation</h4>
<p>Getting the model to rotate wasn’t hard. I could just use glRotatef to do that.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">glRotatef</span><span class="p">(</span><span class="n">GLfloat</span> <span class="n">angle</span><span class="p">,</span> <span class="n">GLfloat</span> <span class="n">x</span><span class="p">,</span> <span class="n">GLfloat</span> <span class="n">y</span><span class="p">,</span> <span class="n">GLfloat</span> <span class="n">z</span><span class="p">);</span></code></pre></div>
<p><em><center></center></em>
Getting the model to rotate according to mouse drag wasn’t a big deal either. All I had to do was set the parameters in glRotatef based on the change in position of the mouse. The hard part was getting the model to rotate in a way that felt <em>natural</em>.</p>

<p>The first problem is glRotatef rotates the model around the origin, the point (0,0,0). This gives the appearance that the model was orbiting about an arbitrary point in space. Not what I want. I want the model to rotate about its center. That way it stays where it is and just spins around.</p>

<p>There is a clever trick to accomplish this. Since glRotatef rotates about the origin, you can just move whatever point you want to rotate about to the origin, apply the rotation, and then move the object back to where it was. Imagine I pick up the model, move its center to the origin, rotate it, and move it back to its original point in space.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cm">/* Move center to origin */</span>
<span class="n">glTranslatef</span><span class="p">(</span><span class="n">model</span><span class="p">.</span><span class="n">center</span><span class="p">().</span><span class="n">x</span><span class="p">,</span> <span class="n">model</span><span class="p">.</span><span class="n">center</span><span class="p">().</span><span class="n">y</span><span class="p">,</span> <span class="n">model</span><span class="p">.</span><span class="n">center</span><span class="p">().</span><span class="n">z</span><span class="p">);</span>
<span class="cm">/* Rotate */</span> 
<span class="n">glRotatef</span><span class="p">(</span><span class="n">GLfloat</span> <span class="n">angle</span><span class="p">,</span> <span class="n">GLfloat</span> <span class="n">x</span><span class="p">,</span> <span class="n">GLfloat</span> <span class="n">y</span><span class="p">,</span> <span class="n">GLfloat</span> <span class="n">z</span><span class="p">);</span>
<span class="cm">/* Apply reverse translation to move center back to where it was */</span>
<span class="n">glTranslatef</span><span class="p">(</span><span class="o">-</span> <span class="n">model</span><span class="p">.</span><span class="n">center</span><span class="p">().</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span> <span class="n">model</span><span class="p">.</span><span class="n">center</span><span class="p">().</span><span class="n">y</span><span class="p">,</span> <span class="o">-</span> <span class="n">model</span><span class="p">.</span><span class="n">center</span><span class="p">().</span><span class="n">z</span><span class="p">);</span></code></pre></div>
<p><em><center></center></em></p>

<p>Pretty neat trick! But still, I am left with a model that is rotating in crazy unpredictable patterns.</p>

<iframe width="604.8" height="453.6" src="https://www.youtube.com/embed/ebHibD78bCI" frameborder="0" allowfullscreen=""></iframe>
<p><em><center>?????????</center></em></p>

<p>The rotations seem accurate at the beginning of the demo, but soon deviate from what is expected. You can see that the effect of dragging the mouse in one direction (like left to right) is inconsistent as time goes on.</p>

<p>This is because the rotations are accumulating.</p>

<blockquote>
  <p><strong>Desired Effect</strong>: <br />
0.) Start Position. <br />
1.) Apply rotation A to position at 0. <br />
2.) Apply rotation <strong>B</strong> to position at 1. <br /></p>
</blockquote>

<p>We want each mouse drag to produce a new, independent rotation. So when I drag the mouse from left to right, the model spins right, regardless of the rotations I performed previously.</p>

<blockquote>
  <p><strong>Actual Effect</strong>: <br />
0.) Start Position. <br />
1.) Apply rotation A to position at 0. <br />
2.) Apply rotation <strong>(A + B)</strong> to position at 1. <br /></p>
</blockquote>

<p>As is, the rotations are adding on top of each other. So when I drag the mouse left to right, the model spins according to the sum of the prior rotation and the desired left to right rotation. Confusing right?!?!?!?!</p>

<h4 id="opengl-matrix-stack">OpenGL Matrix Stack</h4>
<p>Here, the openGL matrix stack comes in. Here is the deal: In order to rotate my model, I am manipulating the Model View Matrix. But openGL actually maintains a “stack” of Model View Matrices for me to work with. If I want to save my current matrix, I can “push” it to the stack. Then, I can change the matrix however I want. When I decide that I want to go back to that matrix I pushed earlier, I can “pop” the matrix and I will get the next one on the stack. More confusion, no?</p>

<p>Let’s pretend that coloring is a matrix operation. So I start out with a regular white model view matrix. I call glPushMatrix(). Then I paint the matrix yellow.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cm">/* My matrix is white */</span>
<span class="n">glPushMatrix</span><span class="p">();</span> <span class="c1">// Saving white matrix for later. </span>
<span class="n">applyPaint</span><span class="p">(</span><span class="n">Yellow</span><span class="p">);</span>
<span class="n">drawMyMatrix</span><span class="p">();</span></code></pre></div>
<p><em><center> displays a yellow matrix </center></em></p>

<p>Next, I decide I want a red matrix. If I just start using red paint to my yellow matrix, I am going to end up with an orange matrix. So, first I call glPopMatrix(). Now I get the white matrix back, paint it red, and I have a true red matrix.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cm">/* My matrix is yellow */</span>
<span class="n">glPopMatrix</span><span class="p">();</span> <span class="c1">// Getting the white matrix back. </span>
<span class="n">applyPaint</span><span class="p">(</span><span class="n">red</span><span class="p">);</span>
<span class="n">drawMyMatrix</span><span class="p">();</span>
<span class="n">glPushMatrix</span><span class="p">();</span> <span class="c1">// Saving red matrix for later.</span></code></pre></div>
<p><em><center> displays a red matrix </center></em></p>

<p>Now, I call glPushMatrix() again. I want to turn the matrix purple this time. So I paint this matrix blue, and get a purple matrix. Now I want a green matrix! But I don’t want to slather green paint on a purple thing.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">applyPaint</span><span class="p">(</span><span class="n">blue</span><span class="p">);</span>
<span class="cm">/* Now my matrix is purple! */</span>
<span class="n">drawMyMatrix</span><span class="p">();</span></code></pre></div>
<p><em><center> displays a purple matrix </center></em></p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">glPopMatrix</span><span class="p">();</span> <span class="c1">// Got my red matrix back. </span>
<span class="n">glPopMatrix</span><span class="p">();</span> <span class="c1">// Got my white matrix back. </span>
<span class="n">applyPaint</span><span class="p">(</span><span class="n">green</span><span class="p">);</span>
<span class="n">drawMyMatrix</span><span class="p">();</span></code></pre></div>
<p><em><center> displays a green matrix </center></em></p>

<h4 id="back-to-rotation">Back to Rotation</h4>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">QQuaternion</span> <span class="n">GLWidget</span><span class="o">::</span><span class="n">drag2Rotate</span><span class="p">(</span><span class="kt">float</span> <span class="n">dx</span><span class="p">,</span> <span class="kt">float</span> <span class="n">dy</span><span class="p">)</span>
<span class="p">{</span>
    <span class="cm">/* Define Axis of Rotation */</span>
    <span class="n">axisOfRotation</span><span class="p">.</span><span class="n">setX</span><span class="p">(</span><span class="o">-</span><span class="n">dy</span><span class="p">);</span>
    <span class="n">axisOfRotation</span><span class="p">.</span><span class="n">setY</span><span class="p">(</span><span class="o">-</span><span class="n">dx</span><span class="p">);</span>
    <span class="n">axisOfRotation</span><span class="p">.</span><span class="n">setZ</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">magnitude</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">dx</span><span class="o">*</span><span class="n">dx</span> <span class="o">+</span> <span class="n">dy</span><span class="o">*</span><span class="n">dy</span><span class="p">);</span>
    <span class="cm">/* Update Rotation Quaternion */</span>
    <span class="n">QQuaternion</span> <span class="n">newQ</span> <span class="o">=</span> <span class="n">QQuaternion</span><span class="o">::</span><span class="n">fromAxisAndAngle</span><span class="p">(</span><span class="n">axisOfRotation</span><span class="p">,</span> <span class="n">magnitude</span><span class="p">);</span>
    <span class="n">currQ</span> <span class="o">=</span> <span class="n">newQ</span> <span class="o">*</span> <span class="n">currQ</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">currQ</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>
<p><em><center> I keep track of the current Quaternion (represents the current rotation) by multiplying the new, applied rotation by the former rotation </center></em></p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="n">glPushMatrix</span><span class="p">();</span> <span class="cm">/* Saves state before rotation */</span>
        <span class="n">QMatrix4x4</span> <span class="n">rotationMatrix</span><span class="p">;</span> <span class="o">/</span> <span class="n">Begins</span> <span class="n">as</span> <span class="n">Identity</span> <span class="n">Matrix</span><span class="p">,</span> <span class="n">Like</span> <span class="n">a</span> <span class="s">&quot;white&quot;</span> <span class="n">matrix</span> <span class="n">from</span> <span class="n">my</span> <span class="n">example</span>
        <span class="cm">/* Here I rotate by the Quaternion, which holds the current rotation */</span>
        <span class="n">rotationMatrix</span><span class="p">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">currQ</span><span class="p">);</span>
        <span class="n">glMatrixMode</span><span class="p">(</span><span class="n">GL_MODELVIEW</span><span class="p">);</span>
        <span class="cm">/* Translate so rotation occurs about model center */</span>
        <span class="n">glTranslatef</span><span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="n">center</span><span class="p">().</span><span class="n">at</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">m</span><span class="p">.</span><span class="n">center</span><span class="p">().</span><span class="n">at</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">m</span><span class="p">.</span><span class="n">center</span><span class="p">().</span><span class="n">at</span><span class="p">(</span><span class="mi">2</span><span class="p">));</span>
        <span class="n">glMultMatrixf</span><span class="p">(</span><span class="n">mat</span><span class="p">.</span><span class="n">constData</span><span class="p">());</span>
        <span class="n">glTranslatef</span><span class="p">(</span><span class="o">-</span><span class="n">m</span><span class="p">.</span><span class="n">center</span><span class="p">().</span><span class="n">at</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="o">-</span><span class="n">m</span><span class="p">.</span><span class="n">center</span><span class="p">().</span><span class="n">at</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="o">-</span><span class="n">m</span><span class="p">.</span><span class="n">center</span><span class="p">().</span><span class="n">at</span><span class="p">(</span><span class="mi">2</span><span class="p">));</span>
        <span class="n">m</span><span class="p">.</span><span class="n">drawMe</span><span class="p">();</span>
        <span class="n">glPopMatrix</span><span class="p">();</span> <span class="cm">/* Reverts to state before rotation */</span></code></pre></div>
<p><em><center> This way, the next time the model is drawn, the rotation is applied to the original, "white", matrix. </center></em></p>

<h4 id="zoom">Zoom</h4>
<p>My first idea was to use glScalef on the Model View Matrix to zoom.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="kt">void</span> <span class="n">MainWindow</span><span class="o">::</span><span class="n">on_toolButton_clicked</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">glMatrixMode</span><span class="p">(</span><span class="n">GL_MODELVIEW</span><span class="p">);</span> <span class="c1">// Specifies which matrix will be scaled</span>
    <span class="n">glScalef</span><span class="p">(</span><span class="n">xScale</span><span class="p">,</span> <span class="n">yScale</span><span class="p">,</span> <span class="n">zScale</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>
<p><em><center> Calling glScalef(0.5,0.5,0.5) would uniformly scale the Model View Matrix down 50%</center></em></p>

<p>That isn’t quite right. Here I am actually changing the size of the model, rather than getting closer or further. This is kind of like the desired effect, but if I get too close holes start appearing in my models. By scaling the Model View Matrix, the model can get so big that parts of it would lie outside the clipping planes.</p>

<iframe width="604.8" height="453.6" src="https://www.youtube.com/embed/crWdEMgDwNE" frameborder="0" allowfullscreen=""></iframe>

<p>Instead of adjusting the Model View Matrix, I need to adjust the Projection Matrix. Doing so changes the way I view the “world”, as opposed to changing the model itself.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="kt">void</span> <span class="n">camera</span><span class="o">::</span><span class="n">setZoom</span><span class="p">(</span><span class="kt">float</span> <span class="n">factor</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">factor</span> <span class="o">&gt;</span> <span class="mf">0.01</span><span class="p">)</span>
        <span class="n">zoomF</span> <span class="o">=</span> <span class="n">factor</span><span class="p">;</span>
    <span class="k">else</span>
        <span class="n">zoomF</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">;</span>
    <span class="n">glMatrixMode</span><span class="p">(</span><span class="n">GL_PROJECTION</span><span class="p">);</span>
    <span class="n">glLoadIdentity</span><span class="p">();</span> <span class="c1">// Make sure zoom isn&#39;t applied to the previous state</span>
    <span class="n">glOrtho</span><span class="p">(</span><span class="n">leftAdjust</span><span class="o">*</span><span class="n">zoomF</span><span class="p">,</span><span class="n">rightAdjust</span><span class="o">*</span><span class="n">zoomF</span><span class="p">,</span><span class="n">bottom</span><span class="o">*</span><span class="n">zoomF</span><span class="p">,</span><span class="n">top</span><span class="o">*</span><span class="n">zoomF</span><span class="p">,</span><span class="o">-</span><span class="n">near</span><span class="p">,</span><span class="o">-</span><span class="n">far</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<hr />

<p>That’s it for now :) My next post will show my final project!</p>


    </article>

    
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'kadie16githubio';
    // var disqus_identifier = 'a unique identifier for each page where Disqus is present';
    // var disqus_title = 'a unique title for each page where Disqus is present';
    // var disqus_url = 'a unique URL for each page where Disqus is present';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


     

 <!-- TO-DO -->


<div class="post-share">
    <ul class="rrssb-buttons tiny-format clearfix">
        
        <li class="rrssb-facebook">
            <a href="https://www.facebook.com/sharer/sharer.php?u=http://kadie16.github.io/project-update-short/" title="Facebook" class="popup">
                <span class="rrssb-icon">
                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
                        <path d="M27.825,4.783c0-2.427-2.182-4.608-4.608-4.608H4.783c-2.422,0-4.608,2.182-4.608,4.608v18.434
                        c0,2.427,2.181,4.608,4.608,4.608H14V17.379h-3.379v-4.608H14v-1.795c0-3.089,2.335-5.885,5.192-5.885h3.718v4.608h-3.726
                        c-0.408,0-0.884,0.492-0.884,1.236v1.836h4.609v4.608h-4.609v10.446h4.916c2.422,0,4.608-2.188,4.608-4.608V4.783z"/>
                    </svg>
                </span>
                <span class="rrssb-text">Post</span>
            </a>
        </li>
        
        
        <li class="rrssb-twitter">
            <a href="http://twitter.com/share?url=http://kadie16.github.io/project-update-short/&amp;text=Work%20in%20Progress" title="Twitter" class="popup">
                <span class="rrssb-icon">
                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
                        <path d="M24.253,8.756C24.689,17.08,18.297,24.182,9.97,24.62c-3.122,0.162-6.219-0.646-8.861-2.32
                        c2.703,0.179,5.376-0.648,7.508-2.321c-2.072-0.247-3.818-1.661-4.489-3.638c0.801,0.128,1.62,0.076,2.399-0.155
                        C4.045,15.72,2.215,13.6,2.115,11.077c0.688,0.275,1.426,0.407,2.168,0.386c-2.135-1.65-2.729-4.621-1.394-6.965
                        C5.575,7.816,9.54,9.84,13.803,10.071c-0.842-2.739,0.694-5.64,3.434-6.482c2.018-0.623,4.212,0.044,5.546,1.683
                        c1.186-0.213,2.318-0.662,3.329-1.317c-0.385,1.256-1.247,2.312-2.399,2.942c1.048-0.106,2.069-0.394,3.019-0.851
                        C26.275,7.229,25.39,8.196,24.253,8.756z"/>
                    </svg>
                </span>
                <span class="rrssb-text">Tweet</span>
            </a>
        </li>
        
        
        <li class="rrssb-googleplus">
            <a href="https://plus.google.com/share?url=http://kadie16.github.io/project-update-short/" title="Google+" class="popup">
                <span class="rrssb-icon">
                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
                        <g>
                            <g>
                                <path d="M14.703,15.854l-1.219-0.948c-0.372-0.308-0.88-0.715-0.88-1.459c0-0.748,0.508-1.223,0.95-1.663
                                c1.42-1.119,2.839-2.309,2.839-4.817c0-2.58-1.621-3.937-2.399-4.581h2.097l2.202-1.383h-6.67c-1.83,0-4.467,0.433-6.398,2.027
                                C3.768,4.287,3.059,6.018,3.059,7.576c0,2.634,2.022,5.328,5.604,5.328c0.339,0,0.71-0.033,1.083-0.068
                                c-0.167,0.408-0.336,0.748-0.336,1.324c0,1.04,0.551,1.685,1.011,2.297c-1.524,0.104-4.37,0.273-6.467,1.562
                                c-1.998,1.188-2.605,2.916-2.605,4.137c0,2.512,2.358,4.84,7.289,4.84c5.822,0,8.904-3.223,8.904-6.41
                                c0.008-2.327-1.359-3.489-2.829-4.731H14.703z M10.269,11.951c-2.912,0-4.231-3.765-4.231-6.037c0-0.884,0.168-1.797,0.744-2.511
                                c0.543-0.679,1.489-1.12,2.372-1.12c2.807,0,4.256,3.798,4.256,6.242c0,0.612-0.067,1.694-0.845,2.478
                                c-0.537,0.55-1.438,0.948-2.295,0.951V11.951z M10.302,25.609c-3.621,0-5.957-1.732-5.957-4.142c0-2.408,2.165-3.223,2.911-3.492
                                c1.421-0.479,3.25-0.545,3.555-0.545c0.338,0,0.52,0,0.766,0.034c2.574,1.838,3.706,2.757,3.706,4.479
                                c-0.002,2.073-1.736,3.665-4.982,3.649L10.302,25.609z"/>
                                <polygon points="23.254,11.89 23.254,8.521 21.569,8.521 21.569,11.89 18.202,11.89 18.202,13.604 21.569,13.604 21.569,17.004
                                23.254,17.004 23.254,13.604 26.653,13.604 26.653,11.89      "/>
                            </g>
                        </g>
                    </svg>
                </span>
                <span class="rrssb-text">Share</span>
            </a>
        </li>
        
        
        
        <li class="rrssb-reddit">
            <a href="http://www.reddit.com/submit?url=http://kadie16.github.io/project-update-short/&amp;title=Work%20in%20Progress" title="Reddit" class="popup">
                <span class="rrssb-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve"><g><path d="M11.794 15.316c0-1.029-0.835-1.895-1.866-1.895c-1.03 0-1.893 0.865-1.893 1.895s0.863 1.9 1.9 1.9 C10.958 17.2 11.8 16.3 11.8 15.316z"/><path d="M18.1 13.422c-1.029 0-1.895 0.864-1.895 1.895c0 1 0.9 1.9 1.9 1.865c1.031 0 1.869-0.836 1.869-1.865 C19.969 14.3 19.1 13.4 18.1 13.422z"/><path d="M17.527 19.791c-0.678 0.678-1.826 1.006-3.514 1.006c-0.004 0-0.009 0-0.014 0c-0.004 0-0.01 0-0.015 0 c-1.686 0-2.834-0.328-3.51-1.005c-0.264-0.265-0.693-0.265-0.958 0c-0.264 0.265-0.264 0.7 0 1 c0.943 0.9 2.4 1.4 4.5 1.402c0.005 0 0 0 0 0c0.005 0 0 0 0 0c2.066 0 3.527-0.459 4.47-1.402 c0.265-0.264 0.265-0.693 0.002-0.958C18.221 19.5 17.8 19.5 17.5 19.791z"/><path d="M27.707 13.267c0-1.785-1.453-3.237-3.236-3.237c-0.793 0-1.518 0.287-2.082 0.761c-2.039-1.295-4.646-2.069-7.438-2.219 l1.483-4.691l4.062 0.956c0.071 1.4 1.3 2.6 2.7 2.555c1.488 0 2.695-1.208 2.695-2.695C25.881 3.2 24.7 2 23.2 2 c-1.059 0-1.979 0.616-2.42 1.508l-4.633-1.091c-0.344-0.081-0.693 0.118-0.803 0.455l-1.793 5.7 C10.548 8.6 7.7 9.4 5.6 10.75C5.006 10.3 4.3 10 3.5 10.029c-1.785 0-3.237 1.452-3.237 3.2 c0 1.1 0.6 2.1 1.4 2.69c-0.04 0.272-0.061 0.551-0.061 0.831c0 2.3 1.3 4.4 3.7 5.9 c2.299 1.5 5.3 2.3 8.6 2.325c3.228 0 6.271-0.825 8.571-2.325c2.387-1.56 3.7-3.66 3.7-5.917 c0-0.26-0.016-0.514-0.051-0.768C27.088 15.5 27.7 14.4 27.7 13.267z M23.186 3.355c0.74 0 1.3 0.6 1.3 1.3 c0 0.738-0.6 1.34-1.34 1.34s-1.342-0.602-1.342-1.34C21.844 4 22.4 3.4 23.2 3.355z M1.648 13.3 c0-1.038 0.844-1.882 1.882-1.882c0.31 0 0.6 0.1 0.9 0.209c-1.049 0.868-1.813 1.861-2.26 2.9 C1.832 14.2 1.6 13.8 1.6 13.267z M21.773 21.57c-2.082 1.357-4.863 2.105-7.831 2.105c-2.967 0-5.747-0.748-7.828-2.105 c-1.991-1.301-3.088-3-3.088-4.782c0-1.784 1.097-3.484 3.088-4.784c2.081-1.358 4.861-2.106 7.828-2.106 c2.967 0 5.7 0.7 7.8 2.106c1.99 1.3 3.1 3 3.1 4.784C24.859 18.6 23.8 20.3 21.8 21.57z M25.787 14.6 c-0.432-1.084-1.191-2.095-2.244-2.977c0.273-0.156 0.59-0.245 0.928-0.245c1.035 0 1.9 0.8 1.9 1.9 C26.354 13.8 26.1 14.3 25.8 14.605z"/></g></svg>
                </span>
                <span class="rrssb-text">Submit</span>
            </a>
        </li>
        
        
        
        <li class="rrssb-pinterest">
            <a href="http://pinterest.com/pin/create/button/?url=http://kadie16.github.io/project-update-short/&amp;media=https://github.com/kadie16/kadie16.github.io/raw/master/assets/images/posts/progress/angel8.png&amp;description=
A%20Demonstration%20of%20my%20Project%20thus%20far

" class="popup">
                <span class="rrssb-icon">
                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
                        <path d="M14.021,1.57C6.96,1.57,1.236,7.293,1.236,14.355c0,7.062,5.724,12.785,12.785,12.785c7.061,0,12.785-5.725,12.785-12.785
                        C26.807,7.294,21.082,1.57,14.021,1.57z M15.261,18.655c-1.161-0.09-1.649-0.666-2.559-1.219c-0.501,2.626-1.113,5.145-2.925,6.458
                        c-0.559-3.971,0.822-6.951,1.462-10.116c-1.093-1.84,0.132-5.545,2.438-4.632c2.837,1.123-2.458,6.842,1.099,7.557
                        c3.711,0.744,5.227-6.439,2.925-8.775c-3.325-3.374-9.678-0.077-8.897,4.754c0.19,1.178,1.408,1.538,0.489,3.168
                        C7.165,15.378,6.53,13.7,6.611,11.462c0.131-3.662,3.291-6.227,6.46-6.582c4.007-0.448,7.771,1.474,8.29,5.239
                        c0.579,4.255-1.816,8.865-6.102,8.533L15.261,18.655z"/>
                    </svg>
                </span>
                <span class="rrssb-text">Pin It</span>
            </a>
        </li>
        
        
        
        <li class="rrssb-pocket">
            <a href="https://getpocket.com/save?url=http://kadie16.github.io/project-update-short/" class="popup">
                <span class="rrssb-icon">
                    <svg width="32px" height="28px" viewBox="0 0 32 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                        <path d="M28.7817528,0.00172488695 C30.8117487,0.00431221738 31.9749312,1.12074529 31.9644402,3.10781507 C31.942147,6.67703739 32.1336065,10.2669583 31.8057648,13.8090137 C30.7147076,25.5813672 17.2181194,31.8996281 7.20714461,25.3808491 C2.71833574,22.4571656 0.196577202,18.3122624 0.0549495772,12.9357897 C-0.0342233715,9.5774348 0.00642900214,6.21519891 0.0300336062,2.85555035 C0.0405245414,1.1129833 1.21157517,0.0146615391 3.01995012,0.00819321302 C7.34746087,-0.00603710433 11.6775944,0.00431221738 16.0064164,0.00172488695 C20.2644248,0.00172488695 24.5237444,-0.00215610869 28.7817528,0.00172488695 L28.7817528,0.00172488695 Z M8.64885184,7.85611511 C7.38773662,7.99113854 6.66148108,8.42606978 6.29310958,9.33228474 C5.90114134,10.2969233 6.17774769,11.1421181 6.89875951,11.8276216 C9.35282156,14.161969 11.8108164,16.4924215 14.2976518,18.7943114 C15.3844131,19.7966007 16.5354102,19.7836177 17.6116843,18.7813283 C20.0185529,16.5495467 22.4070683,14.2982907 24.7824746,12.0327533 C25.9845979,10.8850542 26.1012707,9.56468083 25.1469132,8.60653379 C24.1361858,7.59255976 22.8449191,7.6743528 21.5890476,8.85191291 C19.9936451,10.3488554 18.3680912,11.8172352 16.8395462,13.3777945 C16.1342655,14.093159 15.7200114,14.0048744 15.0566806,13.3440386 C13.4599671,11.7484252 11.8081945,10.2060421 10.1262706,8.70001155 C9.65564653,8.27936164 9.00411403,8.05345704 8.64885184,7.85611511 L8.64885184,7.85611511 L8.64885184,7.85611511 Z"></path>
                    </svg>
                </span>
                <span class="rrssb-text">Save</span>
            </a>
        </li>
        
        
        <li class="rrssb-email">
            <a href="mailto:?subject=Work%20in%20Progress&amp;body=http://kadie16.github.io/project-update-short/" title="Email">
                <span class="rrssb-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve"><g><path d="M20.111 26.147c-2.336 1.051-4.361 1.401-7.125 1.401c-6.462 0-12.146-4.633-12.146-12.265 c0-7.94 5.762-14.833 14.561-14.833c6.853 0 11.8 4.7 11.8 11.252c0 5.684-3.194 9.265-7.399 9.3 c-1.829 0-3.153-0.934-3.347-2.997h-0.077c-1.208 1.986-2.96 2.997-5.023 2.997c-2.532 0-4.361-1.868-4.361-5.062 c0-4.749 3.504-9.071 9.111-9.071c1.713 0 3.7 0.4 4.6 0.973l-1.169 7.203c-0.388 2.298-0.116 3.3 1 3.4 c1.673 0 3.773-2.102 3.773-6.58c0-5.061-3.27-8.994-9.303-8.994c-5.957 0-11.175 4.673-11.175 12.1 c0 6.5 4.2 10.2 10 10.201c1.986 0 4.089-0.43 5.646-1.245L20.111 26.147z M16.646 10.1 c-0.311-0.078-0.701-0.155-1.207-0.155c-2.571 0-4.595 2.53-4.595 5.529c0 1.5 0.7 2.4 1.9 2.4 c1.441 0 2.959-1.828 3.311-4.087L16.646 10.068z"/></g></svg>
                </span>
                <span class="rrssb-text">Send</span>
            </a>
        </li>
        
    </ul>
</div>



    <footer class="post-meta">
        
        <div class="meta">
            <h3 class="meta-title">Date</h3>
            <span class="meta-content">August 1, 2015</span>
        </div>
        
        
        
        <div class="meta">
            <h3 class="meta-title">Categories</h3>
            <span class="meta-content">
                
                    Project&nbsp;
                
            </span>
        </div>
        
        
        <div class="meta">
            <h3 class="meta-title">Tags</h3>
            <span class="meta-content">
                
                    C++&nbsp;
                
                    Work&nbsp;
                
                    Project&nbsp;
                
                    Opengl&nbsp;
                
                    Computer&nbsp;
                
                    Graphics&nbsp;
                
                    Qt&nbsp;
                
                    Cgal&nbsp;
                
            </span>
        </div>
        
    </footer>

   

</div>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63774988-1', 'auto');
  ga('send', 'pageview');

</script>

            </div>

            




            
<div class="next-post">
    <a href="/gitlet/" class="next-post-link"></a>

    <img src="https://octodex.github.com/images/daftpunktocat-guy.gif" class="next-post-thumb" />

    <div class="next-post-info">
        <span class="next-story">Next Story</span>
        <h3 class="next-post-title">Gitlet & BearGit</h3>
    </div>
</div>



        </div>

    </main>

    <a href="#" class="sb-toggle-left">Menu
    <span class="nav-icon"></span>
</a>

<div class="sb-slidebar sb-left sb-style-push">
    <nav>
        <a href="/"><h2 class="site-title">Kadie Jaffe</h2></a>
        <ul class="sb-menu">
        
        
            
                
            
        
            
                
                <li class="sb-close ">
                    <a href="/Projects.html">Projects</a>
                </li>
                
            
        
            
                
                <li class="sb-close ">
                    <a href="/aboutMe/">About Me</a>
                </li>
                
            
        
            
                
                <li class="sb-close ">
                    <a href="/archive/">Archive</a>
                </li>
                
            
        
            
        
            
                
                <li class="sb-close ">
                    <a href="/blogIndex.html">KD at S.E.A.</a>
                </li>
                
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
                
            
        
        </ul>

        <div class="site-info">
            <p><img src="https://github.com/kadie16/kadie16.github.io/raw/master/assets/images/KadieJaffe.jpg" alt="Kadie Jaffe" style="float:left;width:52px;height:100px;"> 
                By Kadie Jaffe 
                <br>
                <a href = "https://github.com/kadie16/kadie16.github.io/raw/master/assets/images/resume/Kadie%20Jaffe's%20Resume%20Complete.pdf"> Download Resume </a> 
                <br>
                <a href = "https://linkedin.com/in/kadiejaffe" > LinkedIn </a><br>
                <a href = "https://github.com/kadie16" > GitHub </a> <br>
                
            </p>
            
            <p>
            Copyright &copy; 2016
            </p>
        </div>
    </nav>
</div>



    <script type="text/javascript" src="/assets/js/libs/jquery.min.js"></script>
<script type="text/javascript" src="/assets/js/libs/slidebars.min.js"></script>
<script type="text/javascript" src="/assets/js/libs/jquery.backstretch.min.js"></script>
<script type="text/javascript" src="/assets/js/libs/jquery.scrollstop.js"></script>
<script type="text/javascript" src="/assets/js/libs/rrssb.min.js"></script>
<script type="text/javascript" src="/assets/js/functions.js"></script>
<script type="text/javascript">
    $(function($) {
        $.slidebars();

        var steps = [];
        var images = [
            'https://raw.githubusercontent.com/kadie16/kadie16.github.io/master/assets/images/posts/i-swear/background3.png',
        ];

        if (images.length > 0) {
            $('.loader').addClass('loading');

            steps = scrollSteps(images.length);

            $.backstretch(images, {
                fade: 1000
            });

            $.backstretch('pause');
        }

        $(document).on("backstretch.before", function (e, instance, index) {
            $('.loader').addClass('loading');
        });

        $(document).on('scrollstop', function () {
            if (steps.length > 0) {
                var percentage = scrollPercentage();

                for (var i = 0; i < steps.length; i++) {
                    if (percentage < steps[i]) {
                        if (i == $("body").data("backstretch").index) {
                            break;
                        }

                        $.backstretch('show', i);
                        break;
                    }
                }
            }
        });

        $(document).on("backstretch.after", function (e, instance, index) {
            $('.loader').removeClass('loading');
        });
    });
</script>


</body>

</html>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63774988-1', 'auto');
  ga('send', 'pageview');

</script>